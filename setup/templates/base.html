{% load book_tags %}
{% load thumbnail %}
{% load static %}
<html lang="en">
<head>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="UTF-8">

    <title>{% block title %}{% endblock %}</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">
<link rel="shortcut icon" href="{% static 'img/favicon.ico' %}">


<script src="{% static 'ckeditor/ckeditor.js' %}"></script>

    <link href="{% static 'css/design.css' %}" rel="stylesheet">




<!-- Load font awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"/>


</head>
<body>
<header id="side-menu">

    <nav class="side-content">





         <div class="new"><a href="{% url 'browse:homes' %}">ClassicReaders</a></div>
         <div class="new"><a href="{% url 'browse:browse'%}">Genre</a></div>

        <div class="new"><a href="{% url 'blog:bloghome'%}">Blog</a></div>
         {% if request.user.is_authenticated %}
    <div class="new"><a href="{% url 'accounts:edit_account' %}">Profile</a></div>
    <div class="new"><a href="{% url 'accounts:logout' %}">Sign Out</a></div>
         {% else %}
        <div class="new"><a href="{% url 'accounts:login' %}">Sign In</a></div>
    {% endif %}


    </nav>
</header>
<div class="header" id="topnav">

       <div class="nav" id="ham"><a href="#"> <i class="fa fa-bars"></i></a></div>

         <div class="logo"><a href="#home">ClasicReaders</a></div>


    <div class="genre"><a href="{% url 'browse:homes' %}">Home</a></div>
    <div class="genre"><a href="{% url 'browse:browse'%}">Genre</a></div>
    <div class="genre"><a href="{% url 'blog:bloghome'%}">Blog</a></div>
      {% if request.user.is_authenticated %}

    <div class="logout"><a href="{% url 'accounts:logout' %}">Sign Out</a></div>

    {% endif %}
    <div class="search"><i class="fa fa-search"></i></div>
     <div id="myli"><i class="fa fa-book"></i></div>




    <div class="user"> {% if request.user.is_authenticated %}<a href="{% url 'accounts:edit_account'%}"><i class="fa fa-user"></i></a>
           {% else %} <a href="#"><i class="fa fa-user" id="use"></i></a>{% endif %}</div>


</div>

<aside class="side" id="bag">
    <div class="sidecontent" id="tuple">
        <h3>My Library</h3>
    {% for book in myList %}

    <div class="sideview" id="sh">





        <div class="pic" >
             {% thumbnail book.image "85" as im %}
    <a href="#" ><img src="{{ im.url }}"></a>


    {% endthumbnail %}
            </div>
        <div class="pic-caption">
            <h4>{{ book.title }}</h4>
            <p>By {{ book.author }}</p>
            <a href="#" class="dele" data-id="{{ book.id }}"><i class="fa fa-minus"  ></i></a>
        </div>



    </div>

{% empty %}
    <p class="para">Your Library is empty</p>
    {% endfor %}

    </div>

       <a href="{% url 'library:list_detail' %}" class="bu" id="v">View Library</a>
</aside>
<div id="coveringss">
<div id ="home-search">
    <span id="search-fade" >&times</span>
    <input type="search" placeholder="Search...." id="sea" class="home-search-bar">
    <div id="more"><a href=""></a></div>
    <div id="result" class="homie">
    {% include 'search_ajax.html' %}
</div>
</div>
    </div>
<div class="content">

    {% block content %}
    {% endblock %}
</div>
{% account_forms %}
<footer id="bottom">
    <div id="info">

    </div>
    <div id="contact">
        <p><a href="#">Sitemap</a></p>
        <p><a href="{% url 'browse:homes' %}">Home</a></p>
        <p><a href="{% url 'browse:listing' %}">Novel</a></p>
    </div>
    <div id="social-media">
        <p> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="pin"><!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"/></svg></p>
        <p><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="pin">
            <path d="M204 6.5C101.4 6.5 0 74.9 0 185.6 0 256 39.6 296 63.6 296c9.9 0 15.6-27.6 15.6-35.4 0-9.3-23.7-29.1-23.7-67.8 0-80.4 61.2-137.4 140.4-137.4 68.1 0 118.5 38.7 118.5 109.8 0 53.1-21.3 152.7-90.3 152.7-24.9 0-46.2-18-46.2-43.8 0-37.8 26.4-74.4 26.4-113.4 0-66.2-93.9-54.2-93.9 25.8 0 16.8 2.1 35.4 9.6 50.7-13.8 59.4-42 147.9-42 209.1 0 18.9 2.7 37.5 4.5 56.4 3.4 3.8 1.7 3.4 6.9 1.5 50.4-69 48.6-82.5 71.4-172.8 12.3 23.4 44.1 36 69.3 36 106.2 0 153.9-103.5 153.9-196.8C384 71.3 298.2 6.5 204 6.5z"/></svg></p>

    </div>

</footer>
 <script  src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script   src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


<script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<script>
    const cards = document.querySelectorAll(".wrapping")
    const books = document.querySelectorAll(".browse-books")

const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      entry.target.classList.toggle("show", entry.isIntersecting)
    })
},
{
     threshold: 0.5,
})

cards.forEach(card => {
  observer.observe(card)
})
books.forEach(book => {
  observer.observe(book)
})
</script>
{% if request.user.is_staff %}
<script>
    {% block superuser %}
    {% endblock %}
</script>
{% endif %}




<script type="text/javascript" src="{% static 'js/modal.js' %}"></script>

<script type="text/javascript" src="{% static 'js/nav.js' %}"></script>


<script>
    $(function()
  {

  $('a.dele').click(function(e){
 e.preventDefault();
var _self = $(this);
$.ajax({
type: "GET",
url: "{% url 'library:lib_remove' %}",
data:{
        id: $(this).data('id'),

      },
success:function(data){
if(data['status']=='ok'){

_self.closest('div').parent().fadeOut();


}

}
});
  });




    $('#sea').on('keyup', function(){

if(this.value.length >2){

$.ajax({
type: "GET",
url: "{% url 'browse:search'%}",
data: {search_text: $(this).val()},
success: function(data){

$('#result').html(data['html_from_view']);

var link = "/search/pages/?search_text="+$("#sea").val();

$resultcount = $('#home-search #result').children.length;
        if ($resultcount > 1){

    $("#more a").html('See All results');
  $("#more a").attr("href", link);
     $('#home-search #result .search-books:gt(1)').remove();

       }
}
});

}

});

 });
</script>

  <script>
  $(function()
  {

  var swiper = new Swiper('.swiper1', {
  // Optional parameters




slidesPerView:5,

 autoHeight: true,

spaceBetween: 10,
autoplay: true,
direction: 'horizontal',



          navigation: {
    nextEl: '.swiper-button-next',
    prevEl: '.swiper-button-prev',
  },

    breakpoints: {
            1024: {
                slidesPerView: 4,
                spaceBetween: 30
            },

            820:{
                slidesPerView:3.5,
                spaceBetween: 10
            },

            640: {
                slidesPerView: 3.5,
                spaceBetween: 20
            },
        540:{
                slidesPerView: 4,
                spaceBetween: 20
        },
            375:{
                slidesPerView: 2.5,
                spaceBetween: 20
            },
            360:{
                slidesPerView: 2.5,
                spaceBetween: 10
            },
            320: {
                slidesPerView: 3.1,


                spaceBetween: 5
            },
        280:{
                slidesPerView:2.1,
                spaceBetween: 10
        },
        }





});

var swiper2 = new Swiper(".swiper2", {

  spaceBetween: 5,
  slidesPerView:5.5,

  speed: 500,
  centeredSlides: true,
autoHeight: true,

        navigation: {
   nextEl: '.swiper-button-next',
    prevEl: '.swiper-button-prev',
  },
breakpoints: {
  1024: {
                slidesPerView: 3.5,
                spaceBetween: 20
            },
            768: {
                slidesPerView: 4.2,
                spaceBetween: 20
            },
            640: {
                slidesPerView: 4.2,
                spaceBetween: 20
            },

            320: {
                slidesPerView: 2.5,


                spaceBetween: 10
            },
            280:{
                slidesPerView:1.7,
                spaceBetween: 10
        },

        }


});
var swiper3 = new Swiper(".swiper3", {

  spaceBetween: 5,
  slidesPerView:5,

  speed: 500,

autoplay: true,
autoHeight: true,

        navigation: {
   nextEl: '.swiper-button-next',
    prevEl: '.swiper-button-prev',
  },
breakpoints: {
  1024: {
                slidesPerView: 5,
                spaceBetween: 40
            },
            768: {
                slidesPerView: 3.5,
                spaceBetween: 10
            },
            640: {
                slidesPerView: 3.5,
                spaceBetween: 10
            },
            320: {
                slidesPerView: 2.5,


                spaceBetween: 5
            },
            280:{
                slidesPerView:1.7,
                spaceBetween: 10
               },

        }


});
var swiper4 = new Swiper(".swiper4", {



  speed: 500,

autoplay: true,
autoHeight: true,

        navigation: {
   nextEl: '.swiper-button-next',
    prevEl: '.swiper-button-prev',
  },
breakpoints: {
  1024: {
                slidesPerView: 4.5,
                spaceBetween: 20
            },
    900: {
      slidesPerView: 4,
        spaceBetween: 20
    },
    800: {
      slidesPerView: 3,
        spaceBetween: 10
    },
            768: {
                slidesPerView: 3,
                spaceBetween: 10
            },
            640: {
                slidesPerView: 2.7,
                spaceBetween: 10
            },
    551:{
      slidesPerView: 2,
        spaceBetween: 10,
    },
    412:{
      slidesPerView: 1.3,
        spaceBetween: 10
    },
    375:{
      slidesPerView: 1.2,
        spaceBetween: 10
    },
    360:{
      sldesPerView: 1.0,
        spaceBetween: 10,
    },
            320: {
                slidesPerView: 1.0,


                spaceBetween: 10
            },
            280:{
                slidesPerView:1.0,
                spaceBetween: 5
               },

        }


});
    });
  </script>


<script>


$(document).ready(function(){
$('.sideview').hover(function(){

$(this).find(".dele").css({'display':'block'});

}, function(){
$(this).find(".dele").css({'display':'none'});
});
$(".viewss").hover(function(){
$(this).find('.bt').css({'display':'block'});

}, function(){
$(this).find(".bt").css({'display':'none'});
});
$(".myitems").hover(function(){
$(this).find('.bt').css({'display':'block'});

}, function(){
$(this).find(".bt").css({'display':'none'});
});
var $content = $('#share-options').detach();


     // Remove modal from page

  $('#use').on('click', function() {           // Click handler to open modal
    modal.open({content: $content,  width:400, height:800});
     $('#reg').on('click',function()
  {
  $('#login').hide();
  $('#register').show();
  }
  );
   $('#log').on('click',function()
  {
  $('#login').show();
  $('#register').hide();
  }
  );
  });



}());

</script>
<script>
var csrftoken =Cookies.get('csrftoken');
function csrfSafeMethod(method)
{
return(/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}
 $.ajaxSetup({
 beforeSend: function(xhr, settings){
 if(!csrfSafeMethod(settings.type)&& !this.crossDomain)
 {
 xhr.setRequestHeader("X-CSRFToken", csrftoken);
 }
 }
 });
 {% block domready %}
 {% endblock %}

  </script>
</body>
</html>
